@using Microsoft.AspNetCore.Mvc.ViewFeatures

<h3 class="mb-3"><em>Ingredients</em></h3>
@{
  int count = 0;
}
@foreach (var join in @Model.JoinEntitiesIngredients)
{
  <div class="d-flex my-2">
    @{
      bool found = false;
    }
    @foreach (string pantryItem in ViewBag.PantryList)
    {
      @if (pantryItem.Contains(join.Ingredient.Name.ToLower()))
      {
        found = true;
      }
    }
    @if (found == true)
    {
      <i class="fas fa-check me-3" data-bs-placement="right" title="You currently have this ingredient"></i>
    }
    else
    {
      <i class="fas fa-cart-plus me-3 text-primary" data-bs-placement="right" title="You need this ingredient" id="ingredient-@join.Ingredient.IngredientId" data-mdb-toggle="modal" data-mdb-target="#ingredientModal-@join.Ingredient.IngredientId"></i>
      @await Html.PartialAsync("./IngredientModal.cshtml", new ViewDataDictionary(ViewData) {{ "id", @join.Ingredient.IngredientId },{ "name", @join.Ingredient.Name }})
    }
    <span>
      @if (@join.Ingredient.Count > 0)
      {
        @join.Ingredient.Count
      }
      @if (join.Ingredient.Measurement != null)
      {
        @:
        @join.Ingredient.Measurement
        @: of
      }
      @join.Ingredient.Name
    </span>
  </div>
  {

    count += 1;
  }
}
